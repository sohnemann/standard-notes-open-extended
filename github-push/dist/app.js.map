{"version":3,"sources":["app.js"],"names":["angular","module","HomeCtrl","$rootScope","$scope","$timeout","formData","loading","pushBtnClass","pushStatus","componentRelay","ComponentRelay","targetWindow","window","onReady","defaultHeight","streamContextItem","item","note","repos","loadRepoDataForCurrentNote","token","getComponentDataValueForKey","onTokenSet","submitToken","setComponentDataValueForKey","gh","GitHub","me","getUser","loadingRepos","listRepos","err","alert","signOut","length","sort","a","b","aFullName","full_name","toLowerCase","bFullName","noteData","savedNote","uuid","noteFileExtension","fileExtension","noteFileDirectory","fileDirectory","selectRepoWithName","repoName","defaultRepo","defaultFileExtension","defaultFileDirectory","name","selectedRepo","filter","repo","didSelectRepo","selectedRepoObject","getRepo","owner","login","setDataForNote","hasDefaultRepo","key","value","notesData","sanitizeFileDirectory","$directory","replace","pushChanges","$event","target","blur","commitMessage","content","title","fileName","defaultBranch","default_branch","fileContent","text","writeFile","encode","clearComponentData","setSize","$$ngIsClass","controller"],"mappings":"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","sourcesContent":["'use strict';\n\nangular.module('app', []);\n;class HomeCtrl {\n  constructor($rootScope, $scope, $timeout) {\n    $scope.formData = {\n      loading: true,\n    };\n\n    $scope.pushBtnClass = \"info\";\n    $scope.pushStatus = \"Push changes\";\n\n    let componentRelay = new ComponentRelay({\n      targetWindow: window,\n      onReady: function() {\n        $scope.formData.loading = false;\n        $scope.onReady();\n      },\n    });\n\n    const defaultHeight = 60;\n\n    componentRelay.streamContextItem(function(item) {\n      $timeout(function() {\n        $scope.note = item;\n        if ($scope.repos) {\n          $scope.loadRepoDataForCurrentNote();\n        }\n      })\n    });\n\n    $scope.onReady = function() {\n      $scope.token = componentRelay.getComponentDataValueForKey(\"token\");\n      if ($scope.token) {\n        $scope.onTokenSet();\n      }\n    }\n\n    $scope.submitToken = function() {\n      $scope.token = $scope.formData.token;\n      componentRelay.setComponentDataValueForKey(\"token\", $scope.token);\n      $scope.onTokenSet();\n    }\n\n    $scope.onTokenSet = function() {\n      $scope.gh = new GitHub({\n        token: $scope.token\n      });\n\n      const me = $scope.gh.getUser();\n      $scope.formData.loadingRepos = true;\n\n      me.listRepos(function(err, repos) {\n        $timeout(function() {\n          $scope.formData.loadingRepos = false;\n          if (err) {\n            alert(\"An error occurred with the GitHub Push extension. Make sure your GitHub token is valid and try again.\");\n            $scope.signOut();\n            return;\n          }\n          if (repos.length > 0) {\n            // Sorting repos by the full_name key, alphabetically\n            $scope.repos = repos.sort((a, b) => {\n              const aFullName = a.full_name.toLowerCase();\n              const bFullName = b.full_name.toLowerCase();\n\n              if (aFullName < bFullName) {\n                return -1;\n              } else if (aFullName > bFullName) {\n                return 1;\n              }\n              return 0;\n            });\n            if ($scope.note) {\n              $scope.loadRepoDataForCurrentNote();\n            }\n          }\n        });\n      });\n    }\n\n    $scope.loadRepoDataForCurrentNote = function() {\n      const noteData = componentRelay.getComponentDataValueForKey(\"notes\") || {};\n      const savedNote = noteData[$scope.note.uuid];\n\n      if (savedNote) {\n        // per note preference\n        $scope.noteFileExtension = savedNote.fileExtension;\n        $scope.noteFileDirectory = savedNote.fileDirectory;\n        $scope.selectRepoWithName(savedNote.repoName);\n      } else {\n        // default pref\n        const defaultRepo = componentRelay.getComponentDataValueForKey(\"defaultRepo\");\n        if (defaultRepo) {\n          $scope.selectRepoWithName(defaultRepo);\n        }\n      }\n\n      $scope.defaultFileExtension = componentRelay.getComponentDataValueForKey(\"defaultFileExtension\");\n      $scope.formData.fileExtension = $scope.noteFileExtension || $scope.defaultFileExtension || \"txt\";\n\n      $scope.defaultFileDirectory = componentRelay.getComponentDataValueForKey(\"defaultFileDirectory\");\n      $scope.formData.fileDirectory = $scope.noteFileDirectory || $scope.defaultFileDirectory || \"\";\n    }\n\n    $scope.selectRepoWithName = function(name) {\n      $scope.formData.selectedRepo = $scope.repos.filter(function(repo){\n        return repo.name === name;\n      })[0];\n      $scope.didSelectRepo();\n    }\n\n    $scope.didSelectRepo = function() {\n      const repo = $scope.formData.selectedRepo;\n      $scope.selectedRepoObject = $scope.gh.getRepo(repo.owner.login, repo.name);\n\n      // save this as default repo for this note\n      $scope.setDataForNote(\"repoName\", repo.name);\n\n      // save this as default repo globally\n      if (!$scope.hasDefaultRepo) {\n        componentRelay.setComponentDataValueForKey(\"defaultRepo\", repo.name);\n        $scope.hasDefaultRepo = true;\n      }\n    }\n\n    $scope.setDataForNote = function(key, value) {\n      const notesData = componentRelay.getComponentDataValueForKey(\"notes\") || {};\n      const noteData = notesData[$scope.note.uuid] || {};\n      /**\n       * Skip updating the component data if the current value and the new value for the key are the same.\n       * This will prevent spamming the postMessage API with the same message, which causes high CPU usage.\n       */\n      if (noteData[key] === value) {\n        return;\n      }\n      noteData[key] = value;\n      notesData[$scope.note.uuid] = noteData;\n      componentRelay.setComponentDataValueForKey(\"notes\", notesData);\n    }\n\n    $scope.sanitizeFileDirectory = function($directory) {\n      // if no directory is given, then push to root.\n      if (!$directory) {\n        return '';\n      }\n\n      // try to ensure they haven't attempted any funny business with escape strings by turning\n      // any backslashes into forward slashes - then replace any duplicate slashes with a single\n      // slash.\n      return $directory = $directory\n        // make sure the last symbol is a '/'\n        .replace(/[/]*$/g, '/')\n        // make sure there are no escaping slashes.\n        .replace(/\\\\/g, '/')\n        // make sure there are no double '//'.\n        .replace(/\\/\\//g, '/')\n        // make sure the directory does not start with\n        // a '/'.\n        .replace(/^\\/+/g, '');\n    }\n\n    $scope.pushChanges = function($event) {\n      $event.target.blur();\n      const commitMessage = $scope.formData.commitMessage || `Updated note '${$scope.note.content.title}'`;\n\n      const fileExtension = $scope.formData.fileExtension;\n      const fileDirectory = $scope.formData.fileDirectory;\n\n      if (!$scope.defaultFileExtension) {\n        // set this as default\n        componentRelay.setComponentDataValueForKey(\"defaultFileExtension\", fileExtension);\n        $scope.defaultFileExtension = fileExtension;\n      }\n\n      if (fileExtension !== $scope.noteFileExtension) {\n        // set this ext for this note\n        $scope.setDataForNote(\"fileExtension\", fileExtension);\n        $scope.noteFileExtension = fileExtension;\n      }\n\n      if (!$scope.defaultFileDirectory) {\n        // set this as default\n        componentRelay.setComponentDataValueForKey(\"defaultFileDirectory\", fileDirectory);\n        $scope.defaultFileDirectory = fileDirectory;\n      }\n\n      if (fileDirectory !== $scope.noteFileDirectory) {\n        // set this directory for the note\n        $scope.setDataForNote(\"fileDirectory\", fileDirectory);\n        $scope.noteFileDirectory = fileDirectory;\n      }\n\n      const fileName = $scope.sanitizeFileDirectory(fileDirectory) + $scope.note.content.title + \".\" + fileExtension;\n      const defaultBranch = $scope.formData.selectedRepo.default_branch || \"main\";\n      const fileContent = $scope.note.content.text;\n\n      $timeout(function() {\n        $scope.pushStatus = \"Pushing...\";\n        $scope.pushBtnClass = \"warning\";\n      });\n\n      $scope.selectedRepoObject.writeFile(defaultBranch, fileName, fileContent, commitMessage, { encode: true }, function(err) {\n        $timeout(function() {\n          $scope.formData.commitMessage = \"\";\n          if (!err) {\n            $scope.pushStatus = \"Success!\";\n            $scope.pushBtnClass = \"success\";\n          } else {\n            $scope.pushStatus = \"Error!\";\n            $scope.pushBtnClass = \"danger\";\n            alert(\"Something went wrong trying to push your changes.\");\n          }\n        });\n      });\n\n      $timeout(function() {\n        $scope.pushStatus = \"Push changes\";\n        $scope.pushBtnClass = \"info\";\n      }, 2000);\n    }\n\n    $scope.signOut = function() {\n      componentRelay.clearComponentData();\n      $scope.hasDefaultRepo = null;\n      $scope.defaultFileExtension = null;\n      $scope.defaultFileDirectory = null;\n      $scope.noteFileExtension = null;\n      $scope.noteFileDirectory = null;\n      $scope.selectedRepo = null;\n      $scope.repos = null;\n      $scope.token = null;\n      $scope.formData = {\n        loading: false\n      };\n    }\n\n    componentRelay.setSize(\"100%\", defaultHeight);\n  }\n}\n\n// required for FireFox\nHomeCtrl.$$ngIsClass = true;\n\nangular.module('app').controller('HomeCtrl', HomeCtrl);\n"],"file":"app.js"}